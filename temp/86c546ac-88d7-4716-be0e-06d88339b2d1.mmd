sequenceDiagram
    participant Sarah as Sarah's Device
    participant OASIS as OASIS Network
    participant Advertiser
    participant Merchant
    participant TTP as Trusted Third Party
    
    Advertiser->>OASIS: Submit ad campaign
    OASIS->>Sarah: Distribute ads
    Note over Sarah: Local AI agent screens ads based on preferences
    Sarah->>Sarah: View relevant ads only
    Sarah->>OASIS: Request coupon (anonymously)
    OASIS->>Advertiser: Relay coupon request
    Advertiser->>OASIS: Issue cryptographic coupon
    OASIS->>Sarah: Deliver coupon
    Sarah->>Merchant: Present coupon at checkout
    Merchant->>TTP: Verify coupon validity
    TTP->>Merchant: Confirm validity (without revealing identity)
    Merchant->>Sarah: Apply discount
    TTP->>Advertiser: Report redemption (anonymized)
    Note over Advertiser: Receives effectiveness metrics without personal data